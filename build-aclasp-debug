#!/bin/bash

# Build the aclasp stage under gdb for debugging purposes

gdb --args /home/selwyn/clasp/build/boehm/iclasp-boehm --norc --disable-mpi --ignore-image --feature clasp-min --eval '(setq *features* (cons :aclasp *features*))' --eval '(load "sys:kernel;clasp-builder.lsp")' --eval '(setq core::*number-of-jobs* 16)' --eval '(core:compile-aclasp :output-file #P"/home/selwyn/clasp/build/boehm/fasl/aclasp-boehm-bitcode/src/lisp/kernel/tag/start.o")' --eval '(core:exit)' -- src/lisp/kernel/tag/start src/lisp/kernel/lsp/prologue src/lisp/kernel/tag/min-start src/lisp/kernel/init src/lisp/kernel/tag/after-init src/lisp/kernel/cmp/runtime-info src/lisp/kernel/lsp/sharpmacros src/lisp/kernel/cmp/jit-setup src/lisp/kernel/clsymbols src/lisp/kernel/lsp/packages src/lisp/kernel/lsp/foundation src/lisp/kernel/lsp/export src/lisp/kernel/lsp/defmacro src/lisp/kernel/lsp/helpfile src/lisp/kernel/lsp/evalmacros src/lisp/kernel/lsp/claspmacros src/lisp/kernel/lsp/source-transformations src/lisp/kernel/lsp/arraylib src/lisp/kernel/lsp/setf src/lisp/kernel/lsp/listlib src/lisp/kernel/lsp/mislib src/lisp/kernel/lsp/defstruct src/lisp/kernel/lsp/predlib src/lisp/kernel/lsp/cdr-5 src/lisp/kernel/lsp/cmuutil src/lisp/kernel/lsp/seqmacros src/lisp/kernel/lsp/seq src/lisp/kernel/lsp/seqlib src/lisp/kernel/lsp/iolib src/lisp/kernel/lsp/backtrace src/lisp/kernel/lsp/trace src/lisp/kernel/cmp/cmpexports src/lisp/kernel/cmp/cmpsetup src/lisp/kernel/cmp/cmpglobals src/lisp/kernel/cmp/cmputil src/lisp/kernel/cmp/cmpintrinsics src/lisp/kernel/cmp/primitives src/lisp/kernel/cmp/cmpir src/lisp/kernel/cmp/cmpeh src/lisp/kernel/cmp/debuginfo src/lisp/kernel/cmp/codegen-vars src/lisp/kernel/cmp/arguments src/lisp/kernel/cmp/cmplambda src/lisp/kernel/cmp/cmprunall src/lisp/kernel/cmp/cmpliteral src/lisp/kernel/cmp/typeq src/lisp/kernel/cmp/codegen-special-form src/lisp/kernel/cmp/codegen src/lisp/kernel/cmp/compile src/lisp/kernel/cmp/codegen-toplevel src/lisp/kernel/cmp/compile-file src/lisp/kernel/cmp/external-clang src/lisp/kernel/cmp/cmpname src/lisp/kernel/cmp/cmpbundle src/lisp/kernel/cmp/cmprepl src/lisp/kernel/tag/min-pre-epilogue src/lisp/kernel/lsp/epilogue-aclasp src/lisp/kernel/tag/min-end
